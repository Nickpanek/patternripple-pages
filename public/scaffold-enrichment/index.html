<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Scaffold-Target Enrichment Analysis | Verified Data</title>
    <script src="https://cdn.jsdelivr.net/npm/react@18/umd/react.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/react-dom@18/umd/react-dom.production.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@babel/standalone/babel.min.js"></script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif; background: linear-gradient(135deg, #1a2a6c 0%, #b21f1f 50%, #fdbb2d 100%); min-height: 100vh; padding: 20px; }
        .container { max-width: 1400px; margin: 0 auto; background: white; border-radius: 20px; box-shadow: 0 20px 60px rgba(0,0,0,0.3); overflow: hidden; }
        
        /* Header & Intro Styling */
        .header { background: #1a1a1a; color: white; padding: 40px; border-bottom: 4px solid #fdbb2d; }
        .header h1 { font-size: 2.2rem; margin-bottom: 10px; }
        
        .intro-section { padding: 40px; background: #fcfcfc; border-bottom: 1px solid #eee; line-height: 1.6; color: #333; }
        .intro-section h2 { color: #b21f1f; margin-bottom: 15px; border-bottom: 2px solid #eee; padding-bottom: 10px; }
        .intro-section p { margin-bottom: 15px; }
        .intro-section ul { margin-left: 20px; margin-bottom: 15px; }
        .intro-section li { margin-bottom: 5px; }
        .disclaimer { font-size: 0.85rem; background: #fff5f5; border: 1px solid #feb2b2; padding: 15px; border-radius: 8px; margin: 20px 0; }
        .meta-footer { font-size: 0.8rem; color: #666; border-top: 1px solid #eee; padding-top: 10px; }

        .content { padding: 40px; }
        .stats-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin-bottom: 40px; }
        .stat-card { background: #f8f9fa; border: 1px solid #eee; padding: 25px; border-radius: 12px; text-align: center; }
        .stat-card .value { font-size: 2rem; font-weight: bold; color: #b21f1f; margin-bottom: 5px; }
        .stat-card .label { font-size: 0.85rem; color: #666; text-transform: uppercase; letter-spacing: 1px; }
        
        .controls { background: #f0f2f5; padding: 25px; border-radius: 12px; margin-bottom: 30px; display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; }
        .control-group label { display: block; font-weight: 600; margin-bottom: 8px; font-size: 0.9rem; }
        .control-group select, .control-group input { width: 100%; padding: 10px; border-radius: 6px; border: 1px solid #ccc; }
        
        .scaffold-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr)); gap: 20px; }
        .scaffold-card { border: 1px solid #e0e0e0; border-radius: 12px; padding: 20px; transition: transform 0.2s; background: white; }
        .scaffold-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); }
        .scaffold-smiles { font-family: monospace; font-size: 0.75rem; background: #f1f1f1; padding: 10px; border-radius: 6px; word-break: break-all; margin-bottom: 15px; min-height: 60px; display: flex; align-items: center; }
        .metric { display: flex; justify-content: space-between; margin-bottom: 5px; font-size: 0.85rem; }
        .metric-val { font-weight: 700; color: #333; }
        .fold-badge { display: inline-block; padding: 4px 10px; background: #b21f1f; color: white; border-radius: 20px; font-weight: bold; margin-bottom: 10px; }
        .family-label { color: #666; font-style: italic; margin-bottom: 15px; font-size: 0.9rem; }
    </style>
</head>
<body>
    <div id="root"></div>

    <script type="text/babel">
        const { useState, useMemo } = React;

        // VERIFIED DATA FROM CSV
        const ENRICHMENT_DATA = [{"scaffold": "O=S(=O)(c1ccccc1)N(Cc1ccccc1)c1cc2ccccc2s1", "family": "unclassified", "fold": 6.47, "pval": 3.275157903638976e-141, "count": 176, "mw": 379.51, "rings": 4}, {"scaffold": "c1ccc(-c2cn3ccccc3n2)cc1", "family": "membrane receptor", "fold": 4.76, "pval": 1.3180480265137762e-134, "count": 201, "mw": 194.24, "rings": 3}, {"scaffold": "O=C(c1n[nH]c2c1CCNC2)N1CCC(c2ccccc2)CC1", "family": "secreted", "fold": 36.88, "pval": 1.0601151782092131e-125, "count": 81, "mw": 310.4, "rings": 4}, {"scaffold": "O=C(Nc1ccccc1)N1Cc2ccccc2C1", "family": "enzyme", "fold": 4.02, "pval": 1.3946392899434204e-112, "count": 189, "mw": 238.29, "rings": 3}, {"scaffold": "O=S(=O)(Nc1cc2ccccc2s1)c1ccccc1", "family": "unclassified", "fold": 6.47, "pval": 5.764590668337685e-111, "count": 139, "mw": 289.38, "rings": 3}, {"scaffold": "c1ccc(C(c2ccccc2)c2ccccc2)cc1", "family": "cytosolic other", "fold": 4.21, "pval": 2.829173745091732e-104, "count": 170, "mw": 244.34, "rings": 3}, {"scaffold": "c1ccc(-c2ccc(-c3cnccn3)cc2)cc1", "family": "cytosolic other", "fold": 4.21, "pval": 3.905268387506311e-101, "count": 165, "mw": 232.29, "rings": 3}, {"scaffold": "O=C(Nc1ccccc1)[C@@H]1NCC(c2ccccc2)[C@H]1c1ccccc1", "family": "nuclear other", "fold": 30.58, "pval": 6.526756379189533e-95, "count": 65, "mw": 342.44, "rings": 4}, {"scaffold": "O=C(c1n[nH]c2c1CNCC2)N1CCC(c2ccccc2)CC1", "family": "secreted", "fold": 36.88, "pval": 5.821125783129326e-94, "count": 61, "mw": 310.4, "rings": 4}, {"scaffold": "c1ccc2c(-c3ccnc(N[C@H]4CCCNC4)n3)c[nH]c2c1", "family": "cytosolic other", "fold": 3.32, "pval": 1.4208637396978737e-91, "count": 247, "mw": 293.37, "rings": 4}, {"scaffold": "O=C(CNc1ccccc1)Nc1nc2ccc3[nH]ncc3c2s1", "family": "cytosolic other", "fold": 4.21, "pval": 3.2948523173278256e-89, "count": 146, "mw": 323.38, "rings": 4}, {"scaffold": "c1ccc(-c2cc3ccccc3[nH]2)cc1", "family": "membrane receptor", "fold": 4.57, "pval": 1.711525385844941e-85, "count": 143, "mw": 193.25, "rings": 3}, {"scaffold": "O=C1c2nc(-c3cncnc3)[nH]c2C(c2ccccc2)N1c1ccccc1", "family": "nuclear other", "fold": 30.07, "pval": 3.790262568896071e-84, "count": 59, "mw": 353.39, "rings": 5}, {"scaffold": "O=C(Nc1ccc(CNc2ncnc3ccccc23)cc1)c1ccccc1", "family": "transcription factor", "fold": 16.27, "pval": 2.1364227977854644e-79, "count": 86, "mw": 354.41, "rings": 4}, {"scaffold": "c1ncc(-c2nc(N3CCOCC3)nc3c2CCN3C2CCNC2)cn1", "family": "enzyme", "fold": 4.02, "pval": 4.113634018671286e-79, "count": 134, "mw": 353.43, "rings": 5}, {"scaffold": "O=C1CC[C@H](c2ccccc2)[C@@H](c2ccccc2)N1", "family": "nuclear other", "fold": 29.51, "pval": 9.654261254091323e-77, "count": 55, "mw": 251.33, "rings": 3}, {"scaffold": "O=C(CCCCc1ccc2c(n1)NCCC2)NCc1ccccc1", "family": "membrane receptor", "fold": 4.76, "pval": 2.828566579264141e-75, "count": 114, "mw": 323.44, "rings": 3}, {"scaffold": "N=C(Nc1ccccc1)Nc1ccccc1", "family": "membrane receptor", "fold": 4.1, "pval": 5.921156724558426e-73, "count": 150, "mw": 211.27, "rings": 2}, {"scaffold": "c1ncc2cnn([C@H]3CCCO3)c2n1", "family": "enzyme", "fold": 4.02, "pval": 5.367867924474601e-70, "count": 119, "mw": 190.21, "rings": 3}, {"scaffold": "c1ccc(CNc2cc3ccccc3s2)cc1", "family": "unclassified", "fold": 6.47, "pval": 2.2553346286978463e-69, "count": 88, "mw": 239.34, "rings": 3}, {"scaffold": "O=C1NC(=O)c2c1c1c(ccc3cc[nH]c31)c1[nH]c3ccccc3c21", "family": "cytosolic other", "fold": 4.21, "pval": 3.831653310413096e-69, "count": 114, "mw": 325.33, "rings": 6}, {"scaffold": "c1ccc(CNCc2c[nH]c3ccccc23)cc1", "family": "nuclear other", "fold": 30.58, "pval": 6.132772846687593e-68, "count": 47, "mw": 236.32, "rings": 3}, {"scaffold": "O=C1c2nc(-c3ccccc3)[nH]c2C(c2ccccc2)N1c1ccccc1", "family": "nuclear other", "fold": 25.11, "pval": 2.6428162876237588e-67, "count": 55, "mw": 351.41, "rings": 5}, {"scaffold": "c1ccc(CNc2ncnc3[nH]cnc23)cc1", "family": "cytosolic other", "fold": 4.17, "pval": 1.4159618451251482e-66, "count": 113, "mw": 225.26, "rings": 3}, {"scaffold": "c1ccc(CN2CCC3(CC2)OCCc2sccc23)cc1", "family": "membrane other", "fold": 23.49, "pval": 2.107765022071266e-64, "count": 50, "mw": 299.44, "rings": 4}, {"scaffold": "O=C(CNC(=O)c1cccc(NC2=NCCCN2)c1)NCc1ccccc1", "family": "membrane receptor", "fold": 4.76, "pval": 5.00047561328301e-63, "count": 96, "mw": 365.44, "rings": 3}, {"scaffold": "O=c1[nH]c(-c2cc3ncn(CC4CCCCC4)c3c(-c3cccnc3)n2)no1", "family": "nuclear other", "fold": 30.58, "pval": 1.8471191678615942e-60, "count": 42, "mw": 376.42, "rings": 5}, {"scaffold": "O=S(=O)(c1ccccc1)N(Cc1ccccc1)c1cn2ccccc2n1", "family": "unclassified", "fold": 6.47, "pval": 2.0389312369910656e-60, "count": 77, "mw": 363.44, "rings": 4}, {"scaffold": "c1ccc(Nc2nccc(-c3cncs3)n2)cc1", "family": "cytosolic other", "fold": 4.16, "pval": 9.400749770986769e-55, "count": 94, "mw": 254.32, "rings": 3}, {"scaffold": "O=C(c1nnc2ccccn12)N1CCC(c2ccccc2)CC1", "family": "secreted", "fold": 36.88, "pval": 1.886823538814397e-54, "count": 36, "mw": 306.37, "rings": 4}, {"scaffold": "O=C1c2nn(-c3ccccc3)cc2C(c2ccccc2)N1c1ccccc1", "family": "nuclear other", "fold": 27.33, "pval": 2.417799358528011e-54, "count": 42, "mw": 351.41, "rings": 5}, {"scaffold": "O=C(NC(c1ccccc1)c1ccccc1)[C@@H]1CC[C@@H]2CCCCC(=O)N21", "family": "cytosolic other", "fold": 4.21, "pval": 3.1158819197898832e-52, "count": 87, "mw": 362.47, "rings": 4}, {"scaffold": "O=C(c1cc(Cc2ccccc2)cs1)c1cncnc1NC1CCCC1", "family": "unclassified", "fold": 6.47, "pval": 1.8213168564080924e-51, "count": 66, "mw": 363.49, "rings": 4}, {"scaffold": "c1ccc(Oc2cccc3c2CCC3)cc1", "family": "transcription factor", "fold": 32.55, "pval": 5.904192624168086e-51, "count": 35, "mw": 210.28, "rings": 3}, {"scaffold": "O=C1CNC(=O)CNC(=O)[C@@H](Cc2ccccc2)NC(=O)CNC(=O)CN1", "family": "membrane receptor", "fold": 4.76, "pval": 4.1349993283499595e-50, "count": 77, "mw": 375.39, "rings": 2}, {"scaffold": "O=C1N(Cc2nc3ccccc3[nH]2)c2ccccc2C12CC2", "family": "surface antigen", "fold": 57.45, "pval": 4.550588518518149e-49, "count": 29, "mw": 289.34, "rings": 5}, {"scaffold": "O=C(Nc1ccnc(N2CCCCC2)n1)c1ccccc1N1CCC2(CC1)CC2", "family": "unclassified", "fold": 6.47, "pval": 5.019491264261574e-49, "count": 63, "mw": 391.52, "rings": 5}, {"scaffold": "O=c1ccc2cnc(NC3CCNCC3)nc2n1C1CCCC1", "family": "cytosolic other", "fold": 4.11, "pval": 7.161085151502674e-49, "count": 87, "mw": 313.41, "rings": 4}, {"scaffold": "c1ccc(CNc2ccnc3ccc(-c4cncnc4)cc23)cc1", "family": "secreted", "fold": 36.88, "pval": 3.8084327639026535e-48, "count": 32, "mw": 312.38, "rings": 4}, {"scaffold": "O=C1CN=C(c2ccccc2)c2ccccc2N1", "family": "membrane receptor", "fold": 4.07, "pval": 2.219259755541719e-47, "count": 100, "mw": 236.27, "rings": 3}, {"scaffold": "O=C(Nc1cc(-c2ccccc2)ccc1N1CCNCC1)c1ccccc1", "family": "nuclear other", "fold": 29.71, "pval": 5.632119392813528e-47, "count": 34, "mw": 357.46, "rings": 4}, {"scaffold": "C1=C(c2ccccc2)Sc2ccccc2-n2cccc21", "family": "membrane receptor", "fold": 4.76, "pval": 4.936965395413172e-46, "count": 71, "mw": 275.38, "rings": 4}, {"scaffold": "c1ccc(-c2nccc3ccccc23)cc1", "family": "membrane receptor", "fold": 4.69, "pval": 1.2689453641683313e-45, "count": 73, "mw": 205.26, "rings": 3}, {"scaffold": "c1ccc(-c2[nH]c3ccccc3c2C2CCC2)cc1", "family": "unclassified", "fold": 6.47, "pval": 5.84687930254766e-45, "count": 58, "mw": 247.34, "rings": 4}, {"scaffold": "O=C(/C=C/c1cccnc1)Nc1ccc(S(=O)(=O)c2ccccc2)cc1", "family": "enzyme", "fold": 4.02, "pval": 2.7411039372975545e-43, "count": 75, "mw": 364.43, "rings": 3}, {"scaffold": "O=C(NC1CCC1)[C@@H]1NC[C@@]2(C(=O)Nc3ccccc32)[C@H]1c1ccccc1", "family": "nuclear other", "fold": 30.58, "pval": 1.55472874812047e-42, "count": 30, "mw": 361.45, "rings": 5}, {"scaffold": "O=C(NC1CCCCC1)[C@@H]1NC[C@@]2(C(=O)Nc3ccccc32)[C@H]1c1ccccc1", "family": "nuclear other", "fold": 30.58, "pval": 1.55472874812047e-42, "count": 30, "mw": 389.5, "rings": 5}, {"scaffold": "O=C(Nc1cccc(N2CCOCC2)n1)c1cccnc1N1CCC2(CC1)CC2", "family": "unclassified", "fold": 6.47, "pval": 1.607561139134548e-42, "count": 55, "mw": 393.49, "rings": 5}, {"scaffold": "O=C1NC(=O)[C@@](C#Cc2cccnc2)(CN2Cc3ccccc3C2=O)N1", "family": "secreted", "fold": 36.88, "pval": 7.606579372973379e-42, "count": 28, "mw": 346.35, "rings": 4}, {"scaffold": "c1ccc([C@@H]2C[C@@H]3CN(c4ncccn4)C[C@@H]3C2)cc1", "family": "secreted", "fold": 36.88, "pval": 7.606579372973379e-42, "count": 28, "mw": 265.36, "rings": 4}];

        const Dashboard = () => {
            const [selectedFamily, setSelectedFamily] = useState('all');
            const [sortBy, setSortBy] = useState('pval');

            const families = useMemo(() => {
                const unique = [...new Set(ENRICHMENT_DATA.map(d => d.family))];
                return ['all', ...unique.sort()];
            }, []);

            const filteredData = useMemo(() => {
                let filtered = [...ENRICHMENT_DATA];
                if (selectedFamily !== 'all') {
                    filtered = filtered.filter(d => d.family === selectedFamily);
                }
                
                return filtered.sort((a, b) => {
                    if (sortBy === 'fold') return b.fold - a.fold;
                    if (sortBy === 'pval') return a.pval - b.pval;
                    if (sortBy === 'count') return b.count - a.count;
                    return 0;
                });
            }, [selectedFamily, sortBy]);

            const stats = useMemo(() => {
                return {
                    total: filteredData.length,
                    avgFold: (filteredData.reduce((s, d) => s + d.fold, 0) / filteredData.length || 0).toFixed(1),
                    maxFold: Math.max(...filteredData.map(d => d.fold), 0)
                };
            }, [filteredData]);

            return (
                <div className="container">
                    <div className="header">
                        <h1>Scaffold Enrichment Dashboard</h1>
                    </div>

                    <div className="intro-section">
                        <h2>Scaffold-Target Enrichment Dataset</h2>
                        <p><strong>What it is:</strong> Statistical analysis of 85,717 bioactive compounds from ChEMBL, identifying 456 molecular scaffolds that are significantly enriched (3-57×) in specific protein families (kinases, GPCRs, proteases, etc.).</p>
                        
                        <p><strong>How we got it:</strong> Downloaded ChEMBL 35 database, extracted Bemis-Murcko scaffolds using RDKit, performed Fisher's exact tests with Bonferroni correction to find statistically significant scaffold-protein family associations.</p>
                        
                        <p><strong>Potential uses:</strong></p>
                        <ul>
                            <li>Starting point for drug discovery hit identification</li>
                            <li>Scaffold hopping in medicinal chemistry</li>
                            <li>Training data for generative AI models</li>
                            <li>Teaching dataset for cheminformatics/biostatistics</li>
                        </ul>

                        <div className="disclaimer">
                            <strong>License & Disclaimer:</strong> I (Nick Panek) release all rights to this derived dataset and place it in the public domain. However, <strong>users must independently verify that specific scaffolds/molecules are not patent-protected before commercial use</strong>. This data is for research and educational purposes. No warranty of any kind is provided. Original ChEMBL data subject to EBI terms of use.
                        </div>

                        <div className="meta-footer">
                            <strong>Data format:</strong> CSV files with SMILES strings, protein families, enrichment statistics, and p-values. Interactive dashboard included.<br/>
                            Built with assistance from Claude (Anthropic) | January 2026
                        </div>
                    </div>

                    <div className="content">
                        <div className="stats-grid">
                            <div className="stat-card">
                                <div className="value">{stats.total}</div>
                                <div className="label">Scaffolds Shown</div>
                            </div>
                            <div className="stat-card">
                                <div className="value">{stats.avgFold}×</div>
                                <div className="label">Average Enrichment</div>
                            </div>
                            <div className="stat-card">
                                <div className="value">{stats.maxFold}×</div>
                                <div className="label">Peak Enrichment</div>
                            </div>
                        </div>

                        <div className="controls">
                            <div className="control-group">
                                <label>Target Family</label>
                                <select value={selectedFamily} onChange={e => setSelectedFamily(e.target.value)}>
                                    {families.map(f => <option key={f} value={f}>{f === 'all' ? 'All Families' : f}</option>)}
                                </select>
                            </div>
                            <div className="control-group">
                                <label>Sort By</label>
                                <select value={sortBy} onChange={e => setSortBy(e.target.value)}>
                                    <option value="pval">Statistical Significance (P-Value)</option>
                                    <option value="fold">Fold Enrichment</option>
                                    <option value="count">Compound Count</option>
                                </select>
                            </div>
                        </div>

                        <div className="scaffold-grid">
                            {filteredData.map((d, i) => (
                                <div key={i} className="scaffold-card">
                                    <div className="fold-badge">{d.fold.toFixed(1)}× Enriched</div>
                                    <div className="scaffold-smiles">{d.scaffold}</div>
                                    <div className="family-label">Target: {d.family}</div>
                                    
                                    <div className="metric">
                                        <span>Active Compounds</span>
                                        <span className="metric-val">{d.count}</span>
                                    </div>
                                    <div className="metric">
                                        <span>P-Value (Corr.)</span>
                                        <span className="metric-val">{d.pval.toExponential(1)}</span>
                                    </div>
                                    <div className="metric">
                                        <span>MW / Rings</span>
                                        <span className="metric-val">{d.mw} / {d.rings}</span>
                                    </div>
                                </div>
                            ))}
                        </div>
                    </div>
                </div>
            );
        };

        const root = ReactDOM.createRoot(document.getElementById('root'));
        root.render(<Dashboard />);
    </script>
</body>
</html>
