<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Photo Compressions Lab – Free | PatternRipple</title>
  <meta name="description" content="Free browser-based photo compressor by PatternRipple. Upload PNG or JPEG, resize, watermark, and export as JPEG only. No uploads to server." />
  <link rel="icon" href="data:," />
  <meta name="color-scheme" content="light dark" />
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdn.jsdelivr.net/npm/jszip@3.10.1/dist/jszip.min.js"></script>
  <style>
    :root { color-scheme: light dark; }
    body { font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial; }
    .dropzone {
      border: 2px dashed #94a3b8;
      transition: border-color .15s, background-color .15s;
    }
    .dropzone:hover { border-color: #0f172a; background-color: rgba(15,23,42,0.05); }
    .thumb { width: 48px; height: 48px; object-fit: cover; border-radius: 4px; }
    #toast {
      position: fixed; bottom: 1rem; left: 50%; transform: translateX(-50%);
      background: rgba(15,23,42,0.9); color: #fff;
      padding: .5rem 1rem; border-radius: .25rem; font-size: .875rem;
      transition: opacity .3s; z-index: 50;
    }
  </style>
</head>
<body class="bg-slate-50 dark:bg-slate-900 text-slate-900 dark:text-slate-100 min-h-screen flex flex-col items-center p-4">
  <header class="mb-6 text-center">
    <h1 class="text-2xl font-bold">Photo Compressions Lab – Free</h1>
    <p class="text-sm text-slate-500">Supports PNG + JPEG upload → Exports JPEG only</p>
  </header>

  <main class="w-full max-w-2xl space-y-4">
    <div id="dropzone" class="dropzone flex flex-col items-center justify-center p-8 rounded cursor-pointer">
      <p class="text-slate-500 mb-2">Drop images here or click to browse</p>
      <input id="fileInput" type="file" accept="image/jpeg,image/jpg,image/pjpeg,image/png" multiple class="hidden" />
      <button type="button" class="px-3 py-1 text-sm bg-slate-200 hover:bg-slate-300 rounded">Select Images</button>
    </div>

    <div id="queue" class="space-y-2"></div>

    <div class="grid grid-cols-2 gap-4 text-sm">
      <label class="flex flex-col">
        <span>Resize (long edge px)</span>
        <input id="inpLongEdge" type="number" value="2500" min="200" max="12000" class="border rounded px-2 py-1">
      </label>
      <label class="flex flex-col">
        <span>JPEG Quality (%)</span>
        <input id="inpQuality" type="number" value="85" min="10" max="100" class="border rounded px-2 py-1">
      </label>
    </div>

    <div class="grid grid-cols-2 gap-4 text-sm">
      <label class="flex flex-col">
        <span>Watermark Text (optional)</span>
        <input id="wmText" type="text" placeholder="Your name or brand" class="border rounded px-2 py-1">
      </label>
      <label class="flex flex-col">
        <span>Watermark Opacity (0–1)</span>
        <input id="wmOpacity" type="number" step="0.05" min="0" max="1" value="0.3" class="border rounded px-2 py-1">
      </label>
    </div>

    <div class="flex gap-2">
      <button id="btnClear" class="px-4 py-2 bg-slate-200 hover:bg-slate-300 rounded text-sm">Clear</button>
      <button id="btnExport" class="px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded text-sm">Export ZIP</button>
      <div id="status" class="ml-auto text-sm text-slate-500 self-center">Idle</div>
    </div>

    <div class="text-center text-xs text-slate-400 mt-8">
      <p>Free version – max 5 images per export. <a href="https://patternripple.gumroad.com/l/photo-compressions-pro" class="underline text-slate-500 hover:text-slate-700">Upgrade to Pro</a></p>
    </div>
  </main>

  <div id="toast" class="hidden"></div>

  <script src="app.js"></script>
  <script>
    document.querySelector('#dropzone button')?.addEventListener('click', () =>
      document.getElementById('fileInput').click()
    );
  </script>
</body>
</html>